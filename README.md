
# INTRODUCTION

This service provides a URL lookup that responds to the GET requests where the caller passes in a URL and 
the service responds whether the URL is malware or not. The GET requests would look like this:

 GET /urlinfo/1/{hostname_and_port}/{original_path_and_query_string}. 
 
 The POST request is added to update the DB and the request look like this:
 
 POST /urlupdate/1
 
This service responds with the following ApiResp structure:

# ApiResp

## Properties
Name | Type | Description | Notes
------------ | ------------- | ------------- | -------------
**Status** | **string** |  | [optional] [default to null]
**Code** | **int32** |  | [optional] [default to null]
**Message** | **string** |  | [optional] [default to null]

If the URL is not a malware URL, the service responds to the caller with the following ApiResp:

Name | Value  
------------ | ------------- 
Status| FAILURE 
Code | 204
Message | This is not a malware URL
 
If the URL is a malware URL, the service responds to the caller with the following ApiResp:

Name | Value  
------------ | ------------- 
Status| SUCCESS 
Code | 200
Message | This is a malware URL

IMPLEMENTATION

The entire code is implemented in golang. Here is the decsription of all the files:
1. api.yaml. This is the swagger(http://swagger.io) yaml file is used to generate the client stub code. The models folder
having the generated stub code. For more info regarding the swagger see the http://sswagger.io. 

2. The db folder implemented in-memory db (db_memory.go) and mongo db( db_mongo.go) layers which can be used to store the 
malware urls. The code is right now using in-memory database. One can use mongo db by just uncomment the mongo db lines in config.go file. Mongodb is distrubited and more scalable and provide superior performance.

3. urlinfoapi folder is basically consisting of the REST API functionality for both GET and POST methods.

4. server folder is having the http server code and the default port is 8080

5. util folder basically implemented the ApiResp utility 

6. testclient folder is having the testclient code ( both GET and POST methods) which can be used to communicate with the http server and can validate the given url is malware or not.

#HOW TO RUN ( Assuming that you have installed go properly)
1. Download the code to your local machine
Running as a standalone application

Run the server first in one terminal

$ go run server/server.go 

Run the client in another terminal

$ go run testclient/testclient.go

One can run the application as a docker container

$ make ( will create a docker image)

$ make run (will run the docker container) 



